!function(){var t={596:function(t){function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i{constructor(t){this.value=t.value,this.suit=t.suit,this.sprite=new Image,this.sprite.src="images/Cards/Medium/"+this.suit+this.value+".png",this.selected=!1,this.trickid=0,this.pos=[0,0],this.points=[]}animate(t,e){t.drawImage(this.sprite,e[0],e[1],i.CARDWIDTH,i.CARDHEIGHT),this.selected&&(t.lineWidth=3,t.strokeStyle="#FFFF00",t.strokeRect(e[0],e[1],i.CARDWIDTH,i.CARDHEIGHT)),this.sprite.onload=()=>{t.drawImage(this.sprite,e[0],e[1],i.CARDWIDTH,i.CARDHEIGHT),this.selected&&(t.lineWidth=3,t.strokeStyle="#FFFF00",t.strokeRect(e[0],e[1],i.CARDWIDTH,i.CARDHEIGHT))}}updatePoints(t){this.pos=t||this.pos,this.points=[{x:this.pos[0],y:this.pos[1]},{x:this.pos[0]+i.CARDWIDTH,y:this.pos[1]},{x:this.pos[0]+i.CARDWIDTH,y:this.pos[1]+i.CARDHEIGHT},{x:this.pos[0],y:this.pos[1]+i.CARDHEIGHT}]}}e(i,"CARDWIDTH",55),e(i,"CARDHEIGHT",80),t.exports=i},381:function(t,e,i){const s=i(527),r=i(630);t.exports=class extends r{constructor(t){super(t),this.dealerSet=[],this.makeTricks(),this.makeDealerSet()}addCardBoard(t){for(let e=0;e<this.tricks.length;e++){if(this.tricks[e].active&&this.tricks[e].addCard(t))return!0;if(!this.tricks[e].active){this.activateNextTrick(),this.addCardBoard(t);break}}return!1}makeTricks(){let t=[],e=new s({pos:[this.pos[0],this.pos[1]+s.HEIGHT],color:"#FFA500",trickid:5,active:!0});t.push(e);let i=new s({pos:[this.pos[0]+s.WIDTH,this.pos[1]+s.HEIGHT],color:"#00CC33",trickid:6,active:!0});t.push(i);let r=new s({pos:this.pos,color:"#800080",trickid:7,active:!1});t.push(r);let a=new s({pos:[this.pos[0]+s.WIDTH,this.pos[1]],color:"#0099FF",trickid:8,active:!1});t.push(a),this.tricks=t}makeDealerSet(){}newTrickSet(){let t=[],e=(this.pos,new s({pos:this.pos,trickid:1}));t.push(e);let i=new s({pos:[this.pos[0]+400,this.pos[1]],color:"#00FF00",trickid:2});t.push(i);let r=new s({pos:[this.pos[0],this.pos[1]+150],color:"#FF0000",trickid:3,active:!1});t.push(r);let a=new s({pos:[this.pos[0]+400,this.pos[1]+150],color:"#0000FF",trickid:4,active:!1});return t.push(a),t}nextDealerCard(){}}},499:function(t,e,i){const s=i(596);t.exports=class{constructor(){this.cards=[],this.makeCards()}makeCards(){let t=[],e=[2,3,4,5,6,7,8,9,10,11,12,13,14],i=["Clubs","Hearts","Diamond","Spades"];for(let r=0;r<e.length;r++)for(let a=0;a<i.length;a++){let l=new s({suit:i[a],value:e[r]});t.push(l)}return this.cards=t,!0}drawCard(){const t=this.cards.length,e=Math.random(),i=Math.floor(t*e),s=this.cards[i];return this.cards.splice(this.cards.indexOf(s),1)[0]}}},36:function(t,e,i){function s(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const r=i(630),a=i(499),l=(i(807),i(381));class o{constructor(){this.dealer=new l({pos:[285,200],name:"Dealer",color:"#FFA500"}),this.player=new r({pos:[285,560],name:"Player",color:"#FFA500"}),this.deck=new a,this.round=0,this.prep_game()}prep_game(){for(let t=0;t<o.START_HAND;t++)this.drawPlayer();for(let t=0;t<o.START_HAND;t++)this.drawDealer()}drawPlayer(){let t=this.deck.drawCard();this.player.addCardBoard(t)}drawDealer(){let t=this.deck.drawCard();this.dealer.addCardBoard(t)}nextRound(){this.round+=1,this.player.gold+=3,this.compareBoards()}compareBoards(){let t=this.dealer.evaluateBoard(),e=this.player.evaluateBoard(),i=t.length<e.length?t.length:e.length,s=0,r=0;for(let a=0;a<i;a++)t[a]>e[a]?(document.getElementById(`score${a+1}`).innerText=0,r+=1):t[a]<e[a]?(document.getElementById(`score${a+1}`).innerText=1,s+=1):t[a]===e[a]&&(document.getElementById(`score${a+1}`).innerText="");this.player.score+=s,this.dealer.score+=r;let a=document.getElementById("playerscore"),l=document.getElementById("dealerscore");a.innerText=`Round Score     ${s}`,l.innerText=`Round Score     ${r}`}resetBoard(){}winner(){let t=this.player.score,e=this.dealer.score,i=[t,e];return t>e?i.push("Player Wins!"):i.push("Dealer Wins!"),i}}s(o,"START_HAND",7),s(o,"MAXROUNDS",10),t.exports=o},630:function(t,e,i){function s(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const r=i(527);class a{constructor(t){this.pos=t.pos,this.name=t.name,this.score=0,this.gold=0,this.color=t.color,this.tricks=[],this.makeTricks()}addCardBoard(t){for(let e=0;e<this.tricks.length;e++)if(this.tricks[e].addCard(t))return!0;return!1}activateNextTrick(){for(let t=0;t<this.tricks.length;t++){let e=this.tricks[t];if(!1===e.active){e.active=!0;break}}}makeTricks(){let t=[],e=(this.pos,new r({pos:this.pos,color:"#FFA500",trickid:1,active:!0}));t.push(e);let i=new r({pos:[this.pos[0]+r.WIDTH,this.pos[1]],color:"#00CC33",trickid:2,active:!0});t.push(i);let s=new r({pos:[this.pos[0],this.pos[1]+r.HEIGHT],color:"#800080",trickid:3,active:!1});t.push(s);let a=new r({pos:[this.pos[0]+r.WIDTH,this.pos[1]+r.HEIGHT],color:"#0099FF",trickid:4,active:!1});t.push(a),this.tricks=t}animate(t){t.fillStyle=this.color,this.tricks.forEach((e=>{e.animate(t,this.name)})),this.animateGold(t)}evaluateBoard(){let t=[];for(let e=0;e<this.tricks.length;e++){let i=this.tricks[e];i.evaluatePoker();let s=i.value||0;t.push(s)}return t}animateGold(t){if("Player"===this.name){t.fillStyle="#003399",t.fillRect(980,370,130,260),t.lineWidth=3,t.strokeStyle="#FFFFFF",t.strokeRect(980,370,130,260),t.font="30px Arial",t.fillStyle="#FFFFFF",t.fillText(`Gold: ${this.gold}`,995,400);const e=new Image;e.src="images/Cards/Medium/BackRed1.png",t.drawImage(e,1020,405,55,80),t.font="20px Arial",t.fillStyle="#FFFFFF",t.fillText("New Card",995,507),t.fillText("2",1090,507),t.drawImage(e,995,515,55,80),t.drawImage(e,1001,515,55,80),t.drawImage(e,1007,515,55,80),t.drawImage(e,1013,515,55,80),t.drawImage(e,1019,515,55,80),t.font="20px Arial",t.fillStyle="#FFFFFF",t.fillText("New Trick",995,620),t.fillText("6",1092,620),e.onload=()=>{t.drawImage(e,1020,405,55,80),t.drawImage(e,995,515,55,80),t.drawImage(e,1001,515,55,80),t.drawImage(e,1007,515,55,80),t.drawImage(e,1013,515,55,80),t.drawImage(e,1019,515,55,80)}}}}s(a,"DIM_X",2*r.WIDTH),s(a,"DIM_Y",2*r.HEIGHT),t.exports=a},527:function(t,e,i){function s(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i(630);const r=i(596),a=i(807);class l{constructor(t){this.pos=t.pos,this.cards=[],this.value=0,this.values=[],this.trait="High Card",this.major=0,this.color=t.color,this.trickid=t.trickid,this.active=t.active,this.points=[],this.updatePoints()}updatePoints(t){this.pos=t||this.pos,this.points=[{x:this.pos[0],y:this.pos[1]},{x:this.pos[0]+l.WIDTH,y:this.pos[1]},{x:this.pos[0]+l.WIDTH,y:this.pos[1]+l.HEIGHT},{x:this.pos[0],y:this.pos[1]+l.HEIGHT}]}evaluate(){let t=0;return this.cards.forEach((e=>{t+=e.value})),t}evaluatePoker(){let t=a.sortCards(this.cards);this.cards=t,this.value=0,this.major=0;let e=[];this.trait="High Card";let i=["Clubs","Hearts","Diamond","Spades"];for(let t=0;t<this.cards.length;t++)e.push(this.cards[t].value);if(this.values=e,5===this.cards.length){let t=!1,s=!0;for(let e=0;e<i.length;e++){let s=i[e];this.cards.every((t=>t.suit===s))&&(t=!0)}for(let t=0;t<e.length-1;t++)e[t]!==e[t+1]+1&&(s=!1);t&&s?this.trait="Straight-Flush":t?this.trait="Flush":s&&(this.trait="Straight")}let s={};for(let t=0;t<e.length;t++)void 0===s[e[t]]?s[e[t]]=1:s[e[t]]+=1;let r=!1,l=!1;for(let t=0;t<e.length;t++)4===s[e[t]]&&(this.trait="Four of a Kind",this.major=e[t]),2===s[e[t]]&&!1===r?(r=!0,this.trait="One Pair",this.major=e[t]):2===s[e[t]]&&!0===r&&e[t]!==e[t-1]?(this.trait="Two Pair",this.major=e[t]>this.major?e[t]:this.major):3===s[e[t]]&&(l=!0,this.trait="Three of a Kind",this.major=e[t]);l&&r&&(this.trait="Full House"),this.major=this.major||e[0];let o=["High Card","One Pair","Two Pair","Three of a Kind","Straight","Flush","Full House","Four of a Kind","Straight-Flush"].indexOf(this.trait)+1,n=e.filter((t=>t!==this.major)),h=this.major*14**o*2,c=0;for(let t=1;t<n.length+1;t++)c+=n[t-1]*14**o/14**t;return this.value=h+c,this.value}removeCard(t){let e=this.cards.indexOf(t);return this.cards.splice(e,1)[0]}addCard(t){let e=this.cards.length;if(e<l.MAXCARDS&&this.active){let i=this.pos;i=[i[0]+l.XBUFFER,i[1]+l.YBUFFER];let s=e*r.CARDWIDTH+3*e;return i=[i[0]+s,i[1]],t.pos=i,t.trickid=this.trickid,t.updatePoints(),this.cards.push(t),!0}return!1}updateCards(){let t=this.cards.length;for(let e=0;e<t;e++){let t=this.cards[e],i=this.pos;i=[i[0]+l.XBUFFER,i[1]+l.YBUFFER];let s=e*r.CARDWIDTH+3*e;i=[i[0]+s,i[1]],t.pos=i,t.updatePoints()}}animate(t,e){if(this.active){const e=document.getElementById(`trick${this.trickid}`);e.style.display="flex",e.style.backgroundColor=this.color;let i=a.sortCards(this.cards);this.cards=i,this.updateCards(),this.evaluatePoker(),t.fillStyle=this.color;let s=this.pos[0],r=this.pos[1];t.fillRect(s,r,l.WIDTH,l.HEIGHT),t.fillStyle="#FFFFFF",t.font="20px Arial",t.fillText(`${this.trait}`,s+115,r+115);for(let e=0;e<this.cards.length;e++){let i=this.cards[e];i.animate(t,i.pos),document.getElementById(`${this.trickid}-${e}`).src=i.sprite.src}t.lineWidth=3,t.strokeStyle="#FFFFFF",t.strokeRect(this.pos[0],this.pos[1],l.WIDTH,l.HEIGHT)}else{t.fillStyle=this.color;let i=this.pos[0],s=this.pos[1];t.fillRect(i,s,l.WIDTH,l.HEIGHT),t.fillStyle="#FFFFFF",t.font="20px Arial","Player"===e?t.fillText("Unlock Hand: 6 Gold!",i+60,s+70):(t.fillStyle="#FFFFFF",t.fillText("Inactive Hand",i+90,s+70)),t.lineWidth=3,t.strokeStyle="#FFFFFF",t.strokeRect(this.pos[0],this.pos[1],l.WIDTH,l.HEIGHT)}}}s(l,"WIDTH",310),s(l,"HEIGHT",120),s(l,"YBUFFER",10),s(l,"XBUFFER",10),s(l,"MAXCARDS",5),t.exports=l},807:function(t,e,i){"use strict";function s(t){function e(t,e){const i=["Spades","Hearts","Diamond","Clubs"];return t.value>e.value?1:t.value<e.value?-1:i.indexOf(t.suit)<i.indexOf(e.suit)?1:-1}let i=t[0];if(t.length<2)return t;let r=t.slice(1).filter((t=>-1===e(i,t))),a=t.slice(1).filter((t=>1===e(i,t))),l=s(r),o=s(a);return l.concat([i]).concat(o)}function r(t,e){return[{x:t[0],y:t[1]},{x:t[0]+e[0],y:t[1]},{x:t[0]+e[0],y:t[1]+e[1]},{x:t[0],y:t[1]+e[1]}]}i.r(e),i.d(e,{createPoints:function(){return r},sortCards:function(){return s}})},142:function(t,e,i){const s=i(807),r=i(36);t.exports=class{constructor(t,e,i){this.game=t,this.gameCtx=e,this.allCards=[],this.allTricks=[],this.setupScreen(),this.buildTricksCards(),this.bindCanvas(),this.cardSelected=!1,this.pos=i}resetCardLinks(){let t=[1,2,3,4,5,6,7,8],e=[0,1,2,3,4];for(let i=1;i<t.length;i++)for(let t=0;t<e.length;t++)document.getElementById(`${i}-${t}`).src="./images/transparent.png"}buildTricksCards(){let t=this.game.player.tricks,e=[],i=[];for(let s=0;s<t.length;s++){let r=t[s];i.push(r);for(let t=0;t<r.cards.length;t++){let i=r.cards[t];e.push(i)}}this.allCards=e,this.allTricks=i}tracePath(t,e){let i=t.points;e.beginPath(),e.moveTo(i[0].x,i[0].y);for(let t=1;t<i.length;t++)e.lineTo(i[t].x,i[t].y)}bindCanvas(){document.getElementById("game").addEventListener("click",this.handleCanvasClick.bind(this))}handleCanvasClick(t){let e=this.pos[0],i=this.pos[1],a=parseInt(t.clientX-e),l=parseInt(t.clientY-i);if(!1===this.cardSelected)for(let t=0;t<this.allCards.length;t++){let e=this.allCards[t];if(this.tracePath(e,this.gameCtx),this.gameCtx.isPointInPath(a,l)){this.cardSelected=e,e.selected=!0,this.game.player.animate(this.gameCtx),this.buildTricksCards();break}}else if(this.cardSelected)for(let t=0;t<this.allTricks.length;t++){let e=this.allTricks[t];this.tracePath(e,this.gameCtx),this.gameCtx.isPointInPath(a,l)&&(this.moveCard(this.cardSelected,e),this.game.player.animate(this.gameCtx),this.buildTricksCards())}const o=[[995,515],[80,80]],n=[[1020,405],[55,80]],h=s.createPoints(o[0],o[1]),c=s.createPoints(n[0],n[1]);if(this.game.player.gold>=6){let t={points:h};this.tracePath(t,this.gameCtx),this.gameCtx.isPointInPath(a,l)&&(console.log("Clicked on Trick Button"),this.game.player.activateNextTrick(),this.game.player.gold-=6,this.game.player.animate(this.gameCtx),this.buildTricksCards())}if(this.game.player.gold>=2){let t={points:c};this.tracePath(t,this.gameCtx),this.gameCtx.isPointInPath(a,l)&&(console.log("Clicked on Card Button"),this.game.drawPlayer(),this.game.player.gold-=2,this.game.player.animate(this.gameCtx),this.buildTricksCards())}const d=[[525,470],[140,50]];let u={points:s.createPoints(d[0],d[1])};this.tracePath(u,this.gameCtx),this.gameCtx.isPointInPath(a,l)&&this.game.round<=r.MAXROUNDS&&this.playRound()}moveCard(t,e){let i,s=t.trickid;this.allTricks.forEach((e=>{e.trickid===s&&(i=e,i.removeCard(t),i.updateCards(),i.evaluatePoker())})),e.addCard(t)?(e.updateCards(),e.evaluatePoker(),this.cardSelected.selected=!1,this.cardSelected=!1):(i.addCard(t),i.updateCards(),i.evaluatePoker(),this.cardSelected.selected=!1,this.cardSelected=!1)}setupScreen(){this.resetCardLinks(),this.gameCtx.clearRect(0,0,1200,900),this.game.dealer.animate(this.gameCtx),this.game.player.animate(this.gameCtx),this.animateScores(),this.buildTricksCards()}animateScores(){this.gameCtx.font="40px Arial",this.gameCtx.fillStyle="#FFFFFF",this.gameCtx.clearRect(350,0,300,198),this.gameCtx.onload=()=>{this.gameCtx.clearRect(350,195,100,50),this.gameCtx.fillText("Dealer Hands",350,195)},this.gameCtx.fillText("Dealer Hands",350,195),this.gameCtx.font="24px Arial Bold",this.gameCtx.fillStyle="#003399",this.gameCtx.fillRect(525,470,140,50),this.gameCtx.fillStyle="#FFFFFF",this.gameCtx.fillText("Score Round",532,500),this.gameCtx.lineWidth=3,this.gameCtx.strokeStyle="#FFFFFF",this.gameCtx.strokeRect(525,470,140,50),this.gameCtx.fillStyle="#003399",this.gameCtx.fillRect(285,470,170,50),this.gameCtx.fillStyle="#FFFFFF",this.gameCtx.fillText(`Player Score: ${this.game.player.score}`,292,500),this.gameCtx.lineWidth=3,this.gameCtx.strokeStyle="#FFFFFF",this.gameCtx.strokeRect(285,470,170,50),this.gameCtx.fillStyle="#003399",this.gameCtx.fillRect(746,470,170,50),this.gameCtx.fillStyle="#FFFFFF",this.gameCtx.fillText(`Dealer Score: ${this.game.dealer.score}`,752,500),this.gameCtx.lineWidth=3,this.gameCtx.strokeStyle="#FFFFFF",this.gameCtx.strokeRect(746,470,170,50)}playRound(){this.game.nextRound(),this.setupScreen(),this.buildTricksCards();const t=document.getElementById("roundscore");document.getElementById("overlay").style.display="block",t.style.display="flex"}}}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){const t=i(36),e=i(142),s=document.getElementById("canvas"),r=s.getContext("2d"),a=new t,l=s.getBoundingClientRect(),o=[l.x,l.y],n=new e(a,r,o),h=document.getElementById("overlay"),c=document.getElementById("start"),d=document.getElementById("start-button"),u=document.getElementById("roundscore"),p=document.getElementById("continuebutton");d.addEventListener("click",(()=>{h.style.display="none",c.style.display="none"})),p.addEventListener("click",(()=>{if(h.style.display="none",u.style.display="none",a.round<t.MAXROUNDS)n.game.drawDealer(),n.setupScreen();else{const t=document.getElementById("finalplayerscore"),e=document.getElementById("finaldealerscore"),i=document.getElementById("winner"),s=document.getElementById("gameover"),r=a.winner();console.log([t,e,i],"edits"),t.innerText=r[0],e.innerText=r[1],i.innerText=r[2],h.style.display="block",s.style.display="block"}})),window.game=a,window.view=n}()}();
//# sourceMappingURL=main.js.map